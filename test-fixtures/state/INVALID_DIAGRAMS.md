# Invalid State Diagrams

This file contains invalid state test fixtures with:
- GitHub render attempts
- Error from mermaid-cli
- Error/output from our linter

> Note: Auto-generated by `scripts/generate-invalid-preview.js`. Do not edit manually.

## Table of Contents

1. [Header Missing](#1-header-missing)
2. [Invalid Arrow](#2-invalid-arrow)
3. [Missing Rbrace](#3-missing-rbrace)
4. [Note Glued To Previous](#4-note-glued-to-previous)
5. [Note Missing Colon](#5-note-missing-colon)
6. [Note Over Missing Colon](#6-note-over-missing-colon)

---

## Summary

| # | Diagram | mermaid-cli | maid | Auto-fix? |
|---:|---|:---:|:---:|:---:|
| 1 | [Header Missing](#1-header-missing) | INVALID | INVALID | â€” |
| 2 | [Invalid Arrow](#2-invalid-arrow) | INVALID | INVALID | âœ… safe |
| 3 | [Missing Rbrace](#3-missing-rbrace) | INVALID | INVALID | âœ… safe |
| 4 | [Note Glued To Previous](#4-note-glued-to-previous) | INVALID | VALID | â€” |
| 5 | [Note Missing Colon](#5-note-missing-colon) | INVALID | INVALID | âœ… safe |
| 6 | [Note Over Missing Colon](#6-note-over-missing-colon) | INVALID | INVALID | âœ… safe |

---

## 1. Header Missing

ðŸ“„ **Source**: [`header-missing.mmd`](./invalid/header-missing.mmd)

### GitHub Render Attempt

> **Note**: This invalid diagram may not render or may render incorrectly.

```mermaid
A --> B


```

### mermaid-cli Result: INVALID

```
UnknownDiagramError: No diagram type detected matching given configuration for text: A --> B


detectType (node_modules/mermaid/dist/mermaid.js:20437:15)
    at $eval ($eval at renderMermaid (node_modules/@mermaid-js/mermaid-cli/src/index.js:266:33), <anonymous>:48:45)
    at #evaluate (node_modules/puppeteer-core/lib/esm/puppeteer/cdp/ExecutionContext.js:388:19)
    at async ExecutionContext.evaluate (node_modules/puppeteer-core/lib/esm/puppeteer/cdp/ExecutionContext.js:275:16)
    at async IsolatedWorld.evaluate (node_modules/puppeteer-core/lib/esm/puppeteer/cdp/IsolatedWorld.js:97:16)
    at async CdpJSHandle.evaluate (node_modules/puppeteer-core/lib/esm/puppeteer/api/JSHandle.js:146:20)
    at async CdpElementHandle.evaluate (node_modules/puppeteer-core/lib/esm/puppeteer/api/ElementHandle.js:340:20)
    at async CdpElementHandle.$eval (node_modules/puppeteer-core/lib/esm/puppeteer/api/ElementHandle.js:494:24)
    at async CdpFrame.$eval (node_modules/puppeteer-core/lib/esm/puppeteer/api/Frame.js:450:20)
    at async CdpPage.$eval (node_modules/puppeteer-core/lib/esm/puppeteer/api/Page.js:450:20)
    at async renderMermaid (node_modules/@mermaid-js/mermaid-cli/src/index.js:266:22)
```

### maid Result: INVALID

```
error[GEN-HEADER-INVALID]: Diagram must start with "graph", "flowchart", "pie", "sequenceDiagram", "classDiagram" or "stateDiagram[-v2]"
at test-fixtures/state/invalid/header-missing.mmd:1:1
  1 | A --> B
    | ^
  2 | 
hint: Start with: flowchart TD | pie | sequenceDiagram | classDiagram | stateDiagram-v2.
```

### maid Auto-fix (`--fix`) Preview

No auto-fix changes (safe level).

### maid Auto-fix (`--fix=all`) Preview

No auto-fix changes (all level).

<details>
<summary>View source code</summary>

```
A --> B


```
</details>

---

## 2. Invalid Arrow

ðŸ“„ **Source**: [`invalid-arrow.mmd`](./invalid/invalid-arrow.mmd)

âŒ **Error**: Single arrow `->` is invalid. Use `-->` instead.

### GitHub Render Attempt

> **Note**: This invalid diagram may not render or may render incorrectly.

```mermaid
stateDiagram-v2
Idle -> Running : start


```

### mermaid-cli Result: INVALID

```
Error: Parse error on line 2:
...tateDiagram-v2Idle -> Running : start
----------------------^
Expecting 'SPACE', 'NL', 'DESCR', '-->', 'HIDE_EMPTY', 'scale', 'COMPOSIT_STATE', 'STRUCT_STOP', 'STATE_DESCR', 'ID', 'FORK', 'JOIN', 'CHOICE', 'CONCURRENT', 'note', 'acc_title', 'acc_descr', 'acc_descr_multiline_value', 'CLICK', 'STRING', 'HREF', 'classDef', 'style', 'class', 'direction_tb', 'direction_bt', 'direction_rl', 'direction_lr', 'EDGE_STATE', 'STYLE_SEPARATOR', got 'INVALID'
Parser3.parseError (node_modules/mermaid/dist/mermaid.js:129832:28)
    at #evaluate (node_modules/puppeteer-core/lib/esm/puppeteer/cdp/ExecutionContext.js:388:19)
    at async ExecutionContext.evaluate (node_modules/puppeteer-core/lib/esm/puppeteer/cdp/ExecutionContext.js:275:16)
    at async IsolatedWorld.evaluate (node_modules/puppeteer-core/lib/esm/puppeteer/cdp/IsolatedWorld.js:97:16)
    at async CdpJSHandle.evaluate (node_modules/puppeteer-core/lib/esm/puppeteer/api/JSHandle.js:146:20)
    at async CdpElementHandle.evaluate (node_modules/puppeteer-core/lib/esm/puppeteer/api/ElementHandle.js:340:20)
    at async CdpElementHandle.$eval (node_modules/puppeteer-core/lib/esm/puppeteer/api/ElementHandle.js:494:24)
    at async CdpFrame.$eval (node_modules/puppeteer-core/lib/esm/puppeteer/api/Frame.js:450:20)
    at async CdpPage.$eval (node_modules/puppeteer-core/lib/esm/puppeteer/api/Page.js:450:20)
    at async renderMermaid (node_modules/@mermaid-js/mermaid-cli/src/index.js:266:22)
    at fromText (node_modules/mermaid/dist/mermaid.js:153955:21)
```

### maid Result: INVALID

```
error[ST-ARROW-INVALID]: Invalid arrow '->'. Use '-->' in state transitions.
at test-fixtures/state/invalid/invalid-arrow.mmd:2:6
  1 | stateDiagram-v2
  2 | Idle -> Running : start
    |      ^^
  3 | 
hint: Example: A --> B : event
```

### maid Auto-fix (`--fix`) Preview

```mermaid
stateDiagram-v2
Idle --> Running : start


```

### maid Auto-fix (`--fix=all`) Preview

```mermaid
stateDiagram-v2
Idle --> Running : start


```

<details>
<summary>View source code</summary>

```
stateDiagram-v2
Idle -> Running : start


```
</details>

---

## 3. Missing Rbrace

ðŸ“„ **Source**: [`missing-rbrace.mmd`](./invalid/missing-rbrace.mmd)

### GitHub Render Attempt

> **Note**: This invalid diagram may not render or may render incorrectly.

```mermaid
stateDiagram-v2
state Foo {
  [*] --> A
  A --> [*]


```

### mermaid-cli Result: INVALID

```
Error: Parse error on line 4:
...--> A  A --> [*]
-------------------^
Expecting 'SPACE', 'NL', 'HIDE_EMPTY', 'scale', 'COMPOSIT_STATE', 'STRUCT_STOP', 'STATE_DESCR', 'ID', 'FORK', 'JOIN', 'CHOICE', 'CONCURRENT', 'note', 'acc_title', 'acc_descr', 'acc_descr_multiline_value', 'CLICK', 'classDef', 'style', 'class', 'direction_tb', 'direction_bt', 'direction_rl', 'direction_lr', 'EDGE_STATE', got '1'
Parser3.parseError (node_modules/mermaid/dist/mermaid.js:129832:28)
    at #evaluate (node_modules/puppeteer-core/lib/esm/puppeteer/cdp/ExecutionContext.js:388:19)
    at async ExecutionContext.evaluate (node_modules/puppeteer-core/lib/esm/puppeteer/cdp/ExecutionContext.js:275:16)
    at async IsolatedWorld.evaluate (node_modules/puppeteer-core/lib/esm/puppeteer/cdp/IsolatedWorld.js:97:16)
    at async CdpJSHandle.evaluate (node_modules/puppeteer-core/lib/esm/puppeteer/api/JSHandle.js:146:20)
    at async CdpElementHandle.evaluate (node_modules/puppeteer-core/lib/esm/puppeteer/api/ElementHandle.js:340:20)
    at async CdpElementHandle.$eval (node_modules/puppeteer-core/lib/esm/puppeteer/api/ElementHandle.js:494:24)
    at async CdpFrame.$eval (node_modules/puppeteer-core/lib/esm/puppeteer/api/Frame.js:450:20)
    at async CdpPage.$eval (node_modules/puppeteer-core/lib/esm/puppeteer/api/Page.js:450:20)
    at async renderMermaid (node_modules/@mermaid-js/mermaid-cli/src/index.js:266:22)
    at fromText (node_modules/mermaid/dist/mermaid.js:153955:21)
```

### maid Result: INVALID

```
error[ST-BLOCK-MISSING-RBRACE]: Missing '}' to close a state block.
at test-fixtures/state/invalid/missing-rbrace.mmd:6:1
  2 | state Foo {  â† start of 'state'
    | â€¦
  6 | 
  7 | }  â† insert '}' here
hint: Close the block: state Foo { ... }
```

### maid Auto-fix (`--fix`) Preview

```mermaid
stateDiagram-v2
state Foo {
  [*] --> A
  A --> [*]

}

```

### maid Auto-fix (`--fix=all`) Preview

```mermaid
stateDiagram-v2
state Foo {
  [*] --> A
  A --> [*]

}

```

<details>
<summary>View source code</summary>

```
stateDiagram-v2
state Foo {
  [*] --> A
  A --> [*]


```
</details>

---

## 4. Note Glued To Previous

ðŸ“„ **Source**: [`note-glued-to-previous.mmd`](./invalid/note-glued-to-previous.mmd)

### GitHub Render Attempt

> **Note**: This invalid diagram may not render or may render incorrectly.

```mermaid
stateDiagram-v2
direction LR
[*] --> Auth
Auth --> [*]Note over Auth: Handles user auth


```

### mermaid-cli Result: INVALID

```
Error: Lexical error on line 4. Unrecognized text.
...thAuth --> [*]Note over Auth: Handles u
----------------------^
Parser3.parseError (node_modules/mermaid/dist/mermaid.js:129832:28)
    at #evaluate (node_modules/puppeteer-core/lib/esm/puppeteer/cdp/ExecutionContext.js:388:19)
    at async ExecutionContext.evaluate (node_modules/puppeteer-core/lib/esm/puppeteer/cdp/ExecutionContext.js:275:16)
    at async IsolatedWorld.evaluate (node_modules/puppeteer-core/lib/esm/puppeteer/cdp/IsolatedWorld.js:97:16)
    at async CdpJSHandle.evaluate (node_modules/puppeteer-core/lib/esm/puppeteer/api/JSHandle.js:146:20)
    at async CdpElementHandle.evaluate (node_modules/puppeteer-core/lib/esm/puppeteer/api/ElementHandle.js:340:20)
    at async CdpElementHandle.$eval (node_modules/puppeteer-core/lib/esm/puppeteer/api/ElementHandle.js:494:24)
    at async CdpFrame.$eval (node_modules/puppeteer-core/lib/esm/puppeteer/api/Frame.js:450:20)
    at async CdpPage.$eval (node_modules/puppeteer-core/lib/esm/puppeteer/api/Page.js:450:20)
    at async renderMermaid (node_modules/@mermaid-js/mermaid-cli/src/index.js:266:22)
    at fromText (node_modules/mermaid/dist/mermaid.js:153955:21)
```

### maid Result: VALID

### maid Auto-fix (`--fix`) Preview

No auto-fix changes (safe level).

### maid Auto-fix (`--fix=all`) Preview

No auto-fix changes (all level).

<details>
<summary>View source code</summary>

```
stateDiagram-v2
direction LR
[*] --> Auth
Auth --> [*]Note over Auth: Handles user auth


```
</details>

---

## 5. Note Missing Colon

ðŸ“„ **Source**: [`note-missing-colon.mmd`](./invalid/note-missing-colon.mmd)

### GitHub Render Attempt

> **Note**: This invalid diagram may not render or may render incorrectly.

```mermaid
stateDiagram-v2
Note right of A Missing colon
A --> B : ok


```

### mermaid-cli Result: INVALID

```
Error: Lexical error on line 2. Unrecognized text.
...m-v2Note right of A Missing colonA -->
----------------------^
Parser3.parseError (node_modules/mermaid/dist/mermaid.js:129832:28)
    at #evaluate (node_modules/puppeteer-core/lib/esm/puppeteer/cdp/ExecutionContext.js:388:19)
    at async ExecutionContext.evaluate (node_modules/puppeteer-core/lib/esm/puppeteer/cdp/ExecutionContext.js:275:16)
    at async IsolatedWorld.evaluate (node_modules/puppeteer-core/lib/esm/puppeteer/cdp/IsolatedWorld.js:97:16)
    at async CdpJSHandle.evaluate (node_modules/puppeteer-core/lib/esm/puppeteer/api/JSHandle.js:146:20)
    at async CdpElementHandle.evaluate (node_modules/puppeteer-core/lib/esm/puppeteer/api/ElementHandle.js:340:20)
    at async CdpElementHandle.$eval (node_modules/puppeteer-core/lib/esm/puppeteer/api/ElementHandle.js:494:24)
    at async CdpFrame.$eval (node_modules/puppeteer-core/lib/esm/puppeteer/api/Frame.js:450:20)
    at async CdpPage.$eval (node_modules/puppeteer-core/lib/esm/puppeteer/api/Page.js:450:20)
    at async renderMermaid (node_modules/@mermaid-js/mermaid-cli/src/index.js:266:22)
    at fromText (node_modules/mermaid/dist/mermaid.js:153955:21)
```

### maid Result: INVALID

```
error[ST-NOTE-MALFORMED]: Malformed note: missing colon before note text.
at test-fixtures/state/invalid/note-missing-colon.mmd:2:17
  1 | stateDiagram-v2
  2 | Note right of A Missing colon
    |                 ^^^^^^^
  3 | A --> B : ok
hint: Example: Note right of A: message
```

### maid Auto-fix (`--fix`) Preview

```mermaid
stateDiagram-v2
Note right of A : Missing colon
A --> B : ok


```

### maid Auto-fix (`--fix=all`) Preview

```mermaid
stateDiagram-v2
Note right of A : Missing colon
A --> B : ok


```

<details>
<summary>View source code</summary>

```
stateDiagram-v2
Note right of A Missing colon
A --> B : ok


```
</details>

---

## 6. Note Over Missing Colon

ðŸ“„ **Source**: [`note-over-missing-colon.mmd`](./invalid/note-over-missing-colon.mmd)

### GitHub Render Attempt

> **Note**: This invalid diagram may not render or may render incorrectly.

```mermaid
stateDiagram-v2
Note over A,B Missing colon
A --> B


```

### mermaid-cli Result: INVALID

```
Error: Lexical error on line 2. Unrecognized text.
...tateDiagram-v2Note over A,B Missing col
----------------------^
Parser3.parseError (node_modules/mermaid/dist/mermaid.js:129832:28)
    at #evaluate (node_modules/puppeteer-core/lib/esm/puppeteer/cdp/ExecutionContext.js:388:19)
    at async ExecutionContext.evaluate (node_modules/puppeteer-core/lib/esm/puppeteer/cdp/ExecutionContext.js:275:16)
    at async IsolatedWorld.evaluate (node_modules/puppeteer-core/lib/esm/puppeteer/cdp/IsolatedWorld.js:97:16)
    at async CdpJSHandle.evaluate (node_modules/puppeteer-core/lib/esm/puppeteer/api/JSHandle.js:146:20)
    at async CdpElementHandle.evaluate (node_modules/puppeteer-core/lib/esm/puppeteer/api/ElementHandle.js:340:20)
    at async CdpElementHandle.$eval (node_modules/puppeteer-core/lib/esm/puppeteer/api/ElementHandle.js:494:24)
    at async CdpFrame.$eval (node_modules/puppeteer-core/lib/esm/puppeteer/api/Frame.js:450:20)
    at async CdpPage.$eval (node_modules/puppeteer-core/lib/esm/puppeteer/api/Page.js:450:20)
    at async renderMermaid (node_modules/@mermaid-js/mermaid-cli/src/index.js:266:22)
    at fromText (node_modules/mermaid/dist/mermaid.js:153955:21)
```

### maid Result: INVALID

```
error[ST-NOTE-MALFORMED]: Malformed note: missing colon before note text.
at test-fixtures/state/invalid/note-over-missing-colon.mmd:2:15
  1 | stateDiagram-v2
  2 | Note over A,B Missing colon
    |               ^^^^^^^
  3 | A --> B
hint: Example: Note right of A: message
```

### maid Auto-fix (`--fix`) Preview

```mermaid
stateDiagram-v2
Note over A,B : Missing colon
A --> B


```

### maid Auto-fix (`--fix=all`) Preview

```mermaid
stateDiagram-v2
Note over A,B : Missing colon
A --> B


```

<details>
<summary>View source code</summary>

```
stateDiagram-v2
Note over A,B Missing colon
A --> B


```
</details>

---

## Notes

This document captures outputs from both tools for each fixture. Use the summary table above to spot mismatches.

Generated by scripts/generate-invalid-preview.js (deterministic output)

## How to Regenerate

```bash
node scripts/generate-invalid-preview.js state
```
